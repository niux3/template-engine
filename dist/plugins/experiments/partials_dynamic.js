const l=n=>(e,t)=>{console.warn("withDynamic is deprecated, use PartialsPlugin from partials.js"),n(e,t),t.extraParams||(t.extraParams=[]),t.extraArgs||(t.extraArgs=[]),t.extraParams.includes("__e")||(t.extraParams.push("__e","__p"),t.extraArgs.push(e,e._partials)),t.preprocessors.unshift(i=>i.replace(/\[\[>\s*\(\s*([a-zA-Z0-9_.-]*)\s*\)\s*\]\]/g,(p,a)=>{if(!a)return"";const o=a.includes(".")?a.split(".").map((r,u)=>u===0?r:`?.${r}`).join(""):a,s=a.includes(".")?a.split(".")[0]:null,c=s?`(typeof ${s}==='object'?Object.assign({},data,${s}):data)`:"data";return`[[- (function(){try{const n=${o};if(typeof n!=='string')return '';const t=__p.get(n);if(!t)throw new Error('Partial "'+n+'" not found');return __e.render(t,${c})}catch(e){if(e.message&&(e.message.includes('Partial')||e.message.includes('not defined')))throw e;return ''}})() ]]`}))};export{l as withDynamic};
